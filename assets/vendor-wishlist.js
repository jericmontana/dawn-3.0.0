const LOCAL_STORAGE_WISHLIST_KEY="shopify-wishlist",LOCAL_STORAGE_DELIMITER=",",BUTTON_ACTIVE_CLASS="active",GRID_LOADED_CLASS="loaded",pageNumber=1,selectors={button:"[button-wishlist]",grid:"[grid-wishlist]"};document.addEventListener("DOMContentLoaded",(()=>{initButtons(),initGrid()})),document.addEventListener("shopify-wishlist:updated",(t=>{initGrid()})),document.addEventListener("shopify-wishlist:init-product-grid",(t=>{const e=document.querySelector(".wishlist__loader--removed");e&&(e.classList.contains("hidden")||e.classList.toggle("hidden"));const s=document.querySelector(".wishlist__container--ul");s&&s.classList.contains("hidden")&&s.classList.toggle("hidden")})),document.addEventListener("product-recommendations:loaded",(t=>{initButtons()}));const fetchProductCardHTML=t=>{const e=`/pages/contact?page=${pageNumber}&view=wishlist-collection-grid`,s=document.querySelectorAll(`.grid__item-${t}`);return fetch(e).then((t=>t.text())).then((e=>{if(s){const s=e;return(new DOMParser).parseFromString(s,"text/html").documentElement.querySelector(`.grid__item-${t}`).outerHTML}pageNumber+=1,fetchProductCardHTML(t)})).catch((e=>console.error(`[Shopify Wishlist] Failed to load content for handle: ${t}`,e)))},setupGrid=async t=>{const e=getWishlist(),s=e.map(fetchProductCardHTML),i=(await Promise.all(s)).join("");t.innerHTML=i,t.classList.add("loaded"),initButtons();const o=new CustomEvent("shopify-wishlist:init-product-grid",{detail:{wishlist:e}});document.dispatchEvent(o)},wishlistButtons=document.querySelectorAll(".button-wishlist"),setupButtons=t=>{t.forEach((t=>{const e=t.dataset.productHandle||!1;if(!e)return console.error("[Shopify Wishlist] Missing `data-product-handle` attribute. Failed to update the wishlist.");wishlistContains(e)&&t.classList.add("active"),t.addEventListener("click",(()=>{const s=document.querySelector(".wishlist__loader--removed"),i=document.querySelector(".wishlist__container--ul");s&&(s.classList.toggle("hidden"),i.classList.toggle("hidden")),updateWishlist(e),t.classList.toggle("active")}))}))},initGrid=()=>{const t=document.querySelector(selectors.grid)||!1;t&&setupGrid(t)},initButtons=()=>{const t=document.querySelectorAll(selectors.button)||[];if(!t.length)return;setupButtons(t);const e=new CustomEvent("shopify-wishlist:init-buttons",{detail:{wishlist:getWishlist()}});document.dispatchEvent(e)},getWishlist=()=>{const t=localStorage.getItem("shopify-wishlist")||!1;return t?t.split(","):[]},setWishlist=t=>{const e=t.join(",");t.length?localStorage.setItem("shopify-wishlist",e):localStorage.removeItem("shopify-wishlist");const s=new CustomEvent("shopify-wishlist:updated",{detail:{wishlist:t}});return document.dispatchEvent(s),e},updateWishlist=t=>{const e=getWishlist(),s=e.indexOf(t);return-1===s?e.push(t):e.splice(s,1),setWishlist(e)},wishlistContains=t=>getWishlist().includes(t),resetWishlist=()=>setWishlist([]),wishlistEmpty=document.querySelectorAll(".wishlist-empty");wishlistEmpty&&(document.addEventListener("DOMContentLoaded",(()=>{getWishlist().length<=0&&wishlistEmpty.forEach((t=>t.style.display="block"))})),document.addEventListener("shopify-wishlist:updated",(()=>{getWishlist().length<=0&&wishlistEmpty.forEach((t=>t.style.display="block"))})));